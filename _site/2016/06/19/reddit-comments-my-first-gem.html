<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>reddit_comments: my first gem</title>
  <meta name="description" content="I’ve wanted to build a gem since I first heard about them, but didn’t find myself building any particular features or products that could be modularized and ...">

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">

  <!-- Fonts -->
  <link href="//fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">

  <!-- Font awesome icons -->
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"
        rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1"
        crossorigin="anonymous">

  <link type="text/css" rel="stylesheet" href="/assets/main.css">

  <link rel="canonical" href="http://estherleytush.com/2016/06/19/reddit-comments-my-first-gem.html">
  <link rel="alternate" type="application/rss+xml" title="Esther Leytush" href="http://estherleytush.com/feed.xml">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">
</head>


  <body class="site">
    <div class="container">
      <div class="row">
        <!-- <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Esther Leytush</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/blog/">Blog</a>
          
        
          
          <a class="page-link" href="/contact/">Contact</a>
          
        
          
        
          
        
          
          <a class="page-link" href="/projects/">Projects</a>
          
        
          <a class="page-link" href="https://resume.creddle.io/resume/h8u15yv6b0r">Resume</a>
      </div>
    </nav>

  </div>

</header>
 -->
        <div id="sidebar" class="col-xs-12 col-sm-4 col-md-4 col-lg-3 col-xl-3">
  <div class="fixed-condition">
    <a href="/">
      <img src="/assets/headshot.jpg" id=about height=75px width=75px width="800" height="800" alt="headshot.jpg">
    </a>

    <h1 class="author-name">Esther Leytush</h1>
    <div id="about">
        <p>I'm a happy web developer at <a href="http://thebacon.com">The Bacon</a>, and a mentor
          at <a href="#">Dev Bootcamp</a> and <a href="#">Codecademy</a>.</p>
    </div>

    <div class="social">
        <ul>
          <!-- {"twitter"=>{"link"=>"#", "icon"=>"fa-twitter"}, "github"=>{"link"=>"#", "icon"=>"fa-github"}, "linkedin"=>{"link"=>"#", "icon"=>"fa-linkedin-square"}} -->
          
            
            

            <li><a href="#" target="_blank">
              <i class="fa fa-twitter"></i></a>
            </li>
          
            
            

            <li><a href="#" target="_blank">
              <i class="fa fa-github"></i></a>
            </li>
          
            
            

            <li><a href="#" target="_blank">
              <i class="fa fa-linkedin-square"></i></a>
            </li>
          
        </ul>
    </div>

    <hr>

    <!-- <div class="search" id="js-search">
      <input type="text" placeholder="search..." class="search__input form-control" id="js-search__input">
      <ul class="search__results" id="js-search__results"></ul>
    </div> -->

    <div class="navbar-links">
      <ul>
        <li><a href="/">&nbsp;&raquo; Home</a></li>
        <li><a id="blog-link" href="/blog">&nbsp;&raquo; Blog</a></li>
        <li><a id="contact-link" href="/contact">&nbsp;&raquo; Contact</a></li>
      </ul>
    </div>
  </div><!-- end /.fixed-condition -->
</div>


        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-8 col-xl-8">
          <div id="main">
            <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">reddit_comments: my first gem</h1>

    <p class="post-meta"><time datetime="2016-06-19T20:00:00-04:00" itemprop="datePublished">June 19, 2016</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I’ve wanted to build a gem since I first heard about them, but didn’t find myself building any particular features or products that could be modularized and shared with others in this way. But this weekend, at AngelHack Brooklyn 2016, my team and I built <a href="https://github.com/mindplace/Curator-a-">Curator</a>:</p>

<blockquote>
  <p>“Curator uses the Reddit API and the NYTimes API to pull text data when queried with a search term. It uses this data to make a call to the HPE Haven OnDemand API, which parses and extracts concepts. These concepts are returned to the frontend, where the jQuery library jQCloud uses it to create beautiful word clouds displaying how the media vs individuals feel about the given search query.”</p>
</blockquote>

<p>One of the major problems we needed to solve was grabbing text from a Reddit post page with comments. Reddit’s commenting system is such that a user can make a comment on another comment, as well as on a post. So after battling http calls issues and figuring all that out, we were still left with a huge hash of comments with nested comments with nested comments.</p>

<p>If you know me at all, you know that my ears perk up at these kinds of problems right away, because I am a bit of a fan of recursion. So I ended up spending a lot of time figuring out what data is given in this hash, and then designing a method to pull in those comments recursively:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">recursive_comment_digging</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="p">[])</span>
    <span class="n">post</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">post</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">child</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span>
    <span class="n">post</span><span class="p">[</span><span class="s2">"parent_id"</span><span class="p">]</span> <span class="o">=</span> <span class="n">child</span><span class="p">[</span><span class="s2">"parent_id"</span><span class="p">]</span>
    <span class="n">post</span><span class="p">[</span><span class="s2">"author"</span><span class="p">]</span> <span class="o">=</span> <span class="n">child</span><span class="p">[</span><span class="s2">"author"</span><span class="p">]</span>
    <span class="n">post</span><span class="p">[</span><span class="s2">"body"</span><span class="p">]</span> <span class="o">=</span> <span class="n">child</span><span class="p">[</span><span class="s2">"body"</span><span class="p">]</span>

    <span class="n">comments</span> <span class="o">&lt;&lt;</span> <span class="n">post</span>

    <span class="k">if</span> <span class="n">child</span><span class="p">[</span><span class="s2">"replies"</span><span class="p">]</span> <span class="o">!=</span> <span class="kp">nil</span> <span class="o">&amp;&amp;</span> <span class="n">child</span><span class="p">[</span><span class="s2">"replies"</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">""</span>
      <span class="n">child</span><span class="p">[</span><span class="s2">"replies"</span><span class="p">][</span><span class="s2">"data"</span><span class="p">][</span><span class="s2">"children"</span><span class="p">].</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">comment</span><span class="o">|</span>
        <span class="n">comments</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span><span class="p">.</span><span class="nf">recursive_comment_digging</span><span class="p">(</span><span class="n">comment</span><span class="p">[</span><span class="s2">"data"</span><span class="p">])</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="n">comments</span>
  <span class="k">end</span>

</code></pre>
</div>

<p>Today I sat down and packaged up that functionality as a gem. It turned out to be a lot easier than I initially thought it would be. Essentially there were several parts to the job:</p>

<ol>
  <li>Deciding on scope: I decided that I wanted my gem to take a URL and return the comments posted on that Reddit page as an array of hashes.</li>
  <li>Understanding what goes into building a gem: I found <a href="http://railscasts.com/episodes/245-new-gem-with-bundler">RailsCast’s post</a> on building a gem with Bundler to be really helpful, as well as the official <a href="http://guides.rubygems.org/rubygems-basics/">RubyGems</a> documentation.</li>
</ol>

<p>The biggest issue I faced was when I tried to push the gem to RubyGems.org. It turned out that because my terminal had been in the folder when I had built the gem initially to install and test locally, the compiled gem file ended up being inside the folders that contained the files to build it–but resolving this was as easy as deleting that file and building it outside of the folders entirely.</p>

<p>Next step is refactoring and building some RSpec tests for this gem!</p>

  </div>
</article>

<div class="post-header">
  <h3><a href="/blog/"><< Back to blog</a></h3>
</div>

<div class="post-header">
  <h2>Comments</h2>
</div>

<article>
  <div id="disqus_thread"></div>
  <script>
      /**
       *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
       *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
       */
      /*
      var disqus_config = function () {
          this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
          this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };
      */
      (function() {
          var d = document, s = d.createElement('script');

          s.src = '//estherleytush.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</article>

          </div>

          <footer class="site-footer">

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Esther Leytush</li>
          <li><a class="page-link" href="mailto:eleytush@gmail.com">eleytush@gmail.com</a></li><br>
          <li>&#9400; Esther Leytush 2016</li>
        </ul>
      </div>
    </div>
  </div>

</footer>

        </div>
      </div>
    </div>

    <script id="dsq-count-scr" src="//estherleytush.disqus.com/count.js" async></script>
    <script
      src="https://code.jquery.com/jquery-3.1.1.js"
      integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
      crossorigin="anonymous"></script>

    <script type="text/javascript" src="/assets/bootstrap.js"></script>
    <script type="text/javascript" src="/assets/thickbox-compressed.js"></script>
    <script type="text/javascript" src="/assets/projects.js"></script>
  </body>

</html>
